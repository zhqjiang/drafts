# æµ‹è¯•å¥–æ¯å’Œæµ‹è¯•åˆ†ç±»

å¦‚ä½•æœ€æ¸…æ™°çš„è§£é‡Šæµ‹è¯•å¥–æ¯ï¼Ÿ

è¯·å…è®¸æˆ‘æ²‰æµ¸åœ¨ä¸€ç‚¹ä¸ªäººå›å¿†ä¸­ã€‚å¦‚æœä½ å¯¹æµ‹è¯•å¥–æ¯ä¸ç†Ÿæ‚‰ï¼Œè¯·çœ‹è¿™ä¸ªå›¾ç‰‡ï¼š

![](./assets/trophy.jpg)

[æˆ‘æœ€åˆåœ¨ä¸€æ¡æ¨æ–‡ä¸­ä»‹ç»äº†è¿™ä¸€ç‚¹ï¼Œå¹¶é™„ä¸Šäº†æˆ‘ç”¨ Google Drive åˆ¶ä½œçš„å¿«é€Ÿç»˜å›¾ã€‚](https://twitter.com/kentcdodds/status/960723172591992832?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E960723172591992832%7Ctwgr%5E%7Ctwcon%5Es1_c10&ref_url=https%3A%2F%2Fkentcdodds.com%2Fblog%2Fthe-testing-trophy-and-testing-classifications)

æˆ‘æ˜¯åœ¨å‘è¡¨äº†ä¸€ç¯‡é¢˜ä¸º[â€œå†™æµ‹è¯•ï¼Œä¸éœ€è¦å¤ªå¤šã€‚ä¸»è¦å†™é›†æˆâ€](https://kentcdodds.com/blog/write-tests)çš„åšæ–‡åæƒ³åˆ°è¿™ä¸ªâ€œæµ‹è¯•å¥–æ¯â€çš„"ã€‚

è¿™æ˜¯æˆ‘å¯¹ [Guillermo Rauch](https://twitter.com/rauchg) å¤§çº¦ä¸€å¹´å‰çš„æ¨æ–‡çš„[çœ‹æ³•](https://twitter.com/rauchg/status/807626710350839808?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E807626710350839808%7Ctwgr%5E%7Ctwcon%5Es1_c10&ref_url=https%3A%2F%2Fkentcdodds.com%2Fblog%2Fthe-testing-trophy-and-testing-classifications)ã€‚
æˆ‘ä¸èƒ½æ›¿ Guillermo å‘è¨€ï¼Œä½†æˆ‘éå¸¸åŒæ„ä»–æ‰€è¯´çš„è¯ï¼Œå› ä¸ºæˆ‘ä½œä¸ºä¸€å UI å·¥ç¨‹å¸ˆçš„ç»éªŒï¼Œä»¥åŠæˆ‘ä¸ªäººæ˜¯å¦‚ä½•åœ¨è¿™ç§æƒ…å†µä¸‹ç†è§£ "integration"(â€œé›†æˆâ€) ä¸€è¯çš„ã€‚

åœ¨æˆ‘èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œæˆ‘å†™çš„å‡ ä¹æ‰€æœ‰ä»£ç éƒ½æ˜¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ï¼Œæˆ–è€…æ˜¯ä¸ºå¸®åŠ©æˆ‘åœ¨æµè§ˆå™¨ä¸­è¿è¡Œä»£ç çš„å·¥å…·ã€‚æ‰€ä»¥å¯¹æˆ‘æ¥è¯´ï¼Œ"å•å…ƒ"ã€"é›†æˆ"å’Œ "ç«¯åˆ°ç«¯"è¿™äº›æœ¯è¯­è‡ªç„¶ä¼šé€šè¿‡è¿™ç§ç»éªŒçš„è§†è§’æ¥çœ‹å¾…ã€‚äº‹å®ä¸Šï¼Œæˆ‘åœ¨å¥–æ¯ä¸­åŠ å…¥äº†"é™æ€"ï¼Œå› ä¸ºåœ¨ JavaScript çš„ä¸–ç•Œä¸­ï¼Œå¹¶ä¸åƒä¸»æµè¯­è¨€ä¸­ä»‹ç»[â€œæµ‹è¯•é‡‘å­—å¡”â€](https://martinfowler.com/bliki/TestPyramid.html)ä¸€æ ·ï¼Œé™æ€æ˜¯å·²æœ‰çš„ä¸œè¥¿ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šä¸»æµè¯­è¨€ C++, Java ç­‰éƒ½æœ‰ä¸åŒç¨‹åº¦çš„å¯¹ç±»å‹çš„æ”¯æŒï¼‰

æˆ‘ä¹‹æ‰€ä»¥å…ˆè¯´æ˜è¿™ä¸ªèƒŒæ™¯ï¼Œæ˜¯ä¸ºäº†å¸®åŠ©ä½ ç†è§£æµ‹è¯•å¥–æ¯ã€‚æˆ‘ä»æ¥æ²¡æœ‰è€ƒè™‘è¿‡å®ƒæ˜¯å¦é€‚ç”¨äºå¾®æœåŠ¡ç”šè‡³æ˜¯åç«¯æœåŠ¡ã€‚æˆ‘è®¤ä¸ºæˆ‘çš„ä»£ç åº“æ˜¯å­¤ç«‹çš„ï¼Œå¹¶è¯•å›¾å°†æˆ‘å¯ä»¥åœ¨è‡ªå·±çš„ä»£ç åº“å†…ç¼–å†™çš„æµ‹è¯•ç±»å‹è¿›è¡Œåˆ†ç±»ã€‚ æˆ‘ä¸€ç›´è®¤ä¸ºç«¯åˆ°ç«¯æµ‹è¯•æ˜¯åœ¨æ²¡æœ‰ä»»ä½• mocking(æ›´å®é™…çš„æƒ…å†µä¸­ï¼Œå°½å¯èƒ½å°‘çš„ mocking)çš„æƒ…å†µä¸‹ï¼Œè¯•å›¾éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸çš„ã€‚

å› æ­¤ï¼Œæˆ‘åªèƒ½æŠŠæˆ‘è‡ªå·±çš„ä»£ç çš„æµ‹è¯•åˆ†ä¸º "å•å…ƒ "æˆ– "é›†æˆ"ã€‚æˆ‘è®¤ä¸º "å•å…ƒ "æ˜¯æŒ‡åŒ…å«é€»è¾‘çš„å•ä¸ªå‡½æ•°ã€ç±»æˆ–å¯¹è±¡ã€‚è¿™é‡Œï¼Œæˆ‘å†³å®šï¼ˆç®€å•åœ°ï¼‰å¯¹å®ƒä»¬è¿›è¡Œåˆ†ç±»ã€‚

- å•å…ƒæµ‹è¯•æ˜¯æŒ‡æµ‹è¯•é‚£äº›æ²¡æœ‰ä¾èµ–ï¼ˆåˆä½œè€…ï¼‰çš„å•å…ƒï¼Œæˆ–è€…æµ‹è¯•é‚£äº›ä¾èµ–è¢« mock çš„å•å…ƒã€‚

- é›†æˆæµ‹è¯•æ˜¯é‚£äº›æµ‹è¯•å¤šä¸ªå•å…ƒç›¸äº’é›†æˆçš„æµ‹è¯•ã€‚

æœ€ç»ˆï¼Œæˆ‘å¼€å‘äº† [Testing Library](https://testing-library.com/)ï¼Œæ¥åŠ å¼ºé‚£äº›å¯¹æˆ‘æ¥è¯´æœ€æœ‰æ•ˆçš„æµ‹è¯•å®è·µã€‚

https://twitter.com/kentcdodds/status/980799621080391680?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E980799621080391680%7Ctwgr%5E%7Ctwcon%5Es1_c10&ref_url=https%3A%2F%2Fkentcdodds.com%2Fblog%2Fthe-testing-trophy-and-testing-classifications

æ ¹æ®æˆ‘è‡ªå·±çš„å®šä¹‰ï¼ŒTesting Library å¯ä»¥ç”¨æ¥æµ‹è¯•å•ä¸ª React ç»„ä»¶ï¼ˆå•å…ƒæµ‹è¯•ï¼‰ã€‚ä¹Ÿå¯ä»¥æµ‹è¯•æ•´ä¸ªé¡µé¢, [é€šè¿‡ MSW](https://kentcdodds.com/blog/stop-mocking-fetch)ï¼ˆé›†æˆæµ‹è¯•ï¼‰mock HTTP è¯·æ±‚çš„ã€‚ä¹Ÿå¯ä»¥ç”¨å¾ˆå°‘çš„ mocks æ¥æµ‹è¯•æ•´ä¸ªåº”ç”¨ç¨‹åºï¼ˆç«¯åˆ°ç«¯æµ‹è¯•ï¼‰ã€‚ç”šè‡³åœ¨å¿…è¦æ—¶æµ‹è¯•[å•ä¸ª React hooks](https://kentcdodds.com/blog/how-to-test-custom-react-hooks)ï¼ˆè¾ƒä½çº§åˆ«çš„å•å…ƒæµ‹è¯•ï¼‰ã€‚Testing Library ç°åœ¨æ˜¯æœ€æµè¡Œçš„ã€æ˜¯äº‹å®ä¸Šçš„æ ‡å‡†......å‘ƒ......ç”¨æ¥æµ‹è¯• React åº”ç”¨çš„æµ‹è¯•åº“ï¼Œè€Œä¸” å¯¹äºæµ‹è¯• DOM æ¥è¯´ï¼ŒåŒæ ·çš„äº‹æƒ…ä¹Ÿæ­£åœ¨å‘ç”Ÿã€‚2020 å¹´ 5 æœˆï¼Œå®ƒåœ¨[ThoughtWorks æŠ€æœ¯é›·è¾¾ä¸Šè·å¾—äº† "Adopt "çš„æ®Šè£ã€‚](https://www.thoughtworks.com/radar/languages-and-frameworks/react-testing-library)

æˆ‘é¢„è®¡æœ‰äººä¼šå¯¹è¿™ç¯‡åšæ–‡å›å¤ã€‚"ä¸ºä»€ä¹ˆä½ ä¸€å¼€å§‹å°±è¦ç¼–é€ è‡ªå·±çš„å®šä¹‰ï¼Ÿåªè¦ä½¿ç”¨ç°æœ‰çš„é‚£äº›å°±å¯ä»¥äº†ã€‚" æ‰€ä»¥æˆ‘åœ¨ä½ é—®ä¹‹å‰å…ˆå›ç­”ï¼š"ä½ å¸Œæœ›æˆ‘åœ¨ä¸¤æ‰“ä¸åŒçš„å®šä¹‰ä¸­é€‰æ‹©å“ªä¸ªä½œä¸ºè‡ªå·±çš„å®šä¹‰ï¼Ÿ" ğŸ˜‚ğŸ˜­ ã€‚Martin Fowler åœ¨ä»–å…³äº[testing shapes](https://martinfowler.com/articles/2021-test-shapes.html)çš„æ–‡ç« ä¸­ï¼Œ è¿‘ä¼¼åœ°å¼•ç”¨äº†ä¸€ä½ "æµ‹è¯•ä¸“å®¶ "åœ¨ 20 ä¸–çºª 90 å¹´ä»£è¢«é—®åŠä»–ä»¬å¦‚ä½•å®šä¹‰ "å•å…ƒæµ‹è¯•"æ—¶çš„ç­”æ¡ˆï¼š

> "åœ¨æˆ‘åŸ¹è®­è¯¾ç¨‹çš„é¦–ä¸ªä¸Šåˆï¼Œæˆ‘å­¦ä¹ äº†å•å…ƒæµ‹è¯•çš„ 24 ç§ä¸åŒå®šä¹‰"ã€‚

è¿™æ˜¯ä¸€ä¸ªå¯æ‚²çš„çŠ¶æ€ï¼Œè€Œä¸”ä¸å¹¸çš„æ˜¯ï¼Œè‡ª 90 å¹´ä»£ä»¥æ¥ä¸€ç›´å¦‚æ­¤ã€‚äº‹å®å°±æ˜¯è¿™æ ·ã€‚æˆ‘å¿…é¡»é€‰æ‹©å¯¹æˆ‘æœ‰æ„ä¹‰çš„ä¸œè¥¿ï¼Œä½œä¸ºä¸€ä¸ªæ•™è‚²å·¥ä½œè€…ï¼Œæˆ‘å¿…é¡»é€‰æ‹©å¯¹æˆ‘æ‰€æ•™çš„äººæœ€æœ‰æ„ä¹‰çš„ä¸œè¥¿ã€‚ä»é‡‡å–æˆ‘çš„å»ºè®®çš„äººçš„ååº”æ¥çœ‹ï¼Œè¿™ä¸ªå†³å®šæ˜¯ä¸é”™çš„ã€‚

åœ¨è®¨è®ºä½ æ˜¯å¦èƒ½è¯æ˜æµ‹è¯•æ˜¯æœ‰æ•ˆçš„æ—¶å€™ï¼Œ[Tim Bray](https://twitter.com/timbray)ï¼ˆåœ¨ä»–çš„æ–‡ç« [testing in the Twenties)](https://www.tbray.org/ongoing/When/202x/2021/05/15/Testing-in-2021)ä¸­ï¼‰ï¼Œæ­£ç¡®åœ°è¯´é“ï¼š

> æˆ‘ä»¬ä¸è¦è‡ªæ¬ºæ¬ºäººåœ°è®¤ä¸ºæˆ‘ä»¬çš„è½¯ä»¶æµ‹è¯•åŸåˆ™ç»„æˆäº†ç§‘å­¦çš„çŸ¥è¯†ã€‚

æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œè¿™é€‚ç”¨äºå…³äºæµ‹è¯•çš„ä¸€åˆ‡ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒæ˜¯å¦æœ‰æ•ˆï¼ˆå®ƒå¯ä»¥æ˜¯æœ‰æ•ˆçš„ï¼‰ã€‚ä»»ä½•è¯•å›¾å¯¹æ‰€æœ‰è¿™äº›æœ¯è¯­è¿›è¡Œå•ä¸€å®šä¹‰çš„åŠªåŠ›éƒ½æ˜¯å¾’åŠ³çš„ã€‚æˆ‘è®°å¾—æˆ‘åœ¨ Assert(JS)çš„æ¼”è®²ï¼ˆæˆ‘åœ¨é‚£é‡Œå‘è¡¨äº†æˆ‘çš„æ¼”è®² [Write Tests.Not too many.Mostly Integration.](https://www.youtube.com/watch?v=Fha2bVoC8SE&list=PLV5CVI1eNcJgNqzNwcs4UKrlJdhfDjshf)ï¼‰ï¼Œæˆ‘è§‚å¯Ÿåˆ°æ¯ä¸ªæ¼”è®²åœ¨æµ‹è¯•çš„å»ºè®®æ–¹é¢éƒ½æœ‰å¾ˆå¤§çš„ä¸åŒã€‚ä½†æˆ‘ç°åœ¨æƒ³æƒ³ï¼Œæˆ‘è®¤ä¸ºå¾ˆå¤šå·®å¼‚å¯ä»¥å½’å› äºæˆ‘ä»¬å¯¹æµ‹è¯•æœ¯è¯­çš„å®šä¹‰ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬å¦‚ä½•åŠªåŠ›å»è¾¾åˆ°æœ‰ä¿¡å¿ƒã€‚

[Justin Searls](https://twitter.com/searls)ï¼ˆä»–ä¹Ÿåœ¨é‚£å¹´çš„ Assert(JS)ä¼šè®®ä¸Š[å‘è¨€](https://www.youtube.com/watch?v=Af4M8GMoxi4)ï¼‰åœ¨æ¨ç‰¹ä¸Šè¯´å¾—å¾ˆå¥½ï¼š

> [äººä»¬å–œæ¬¢äº‰è®ºå†™å“ªç§ç±»å‹çš„æµ‹è¯•çš„æ¯”ä¾‹ï¼Œä½†è¿™æ˜¯åœ¨åˆ†æ•£æ³¨æ„åŠ›ã€‚å‡ ä¹æ²¡æœ‰ä¸€ä¸ªå›¢é˜Ÿä¼šå†™å‡ºå…·æœ‰è¡¨ç°åŠ›çš„æµ‹è¯•ï¼Œè¿™äº›æµ‹è¯•å»ºç«‹äº†æ¸…æ™°çš„è¾¹ç•Œï¼Œè¿è¡Œè¿…é€Ÿè€Œå¯é ï¼Œè€Œä¸”åªæœ‰åœ¨æœ‰ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šå¤±è´¥ã€‚è¯·å…³æ³¨è¿™äº›ä¸œè¥¿ã€‚](https://twitter.com/searls/status/1393385209089990659?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E1393385209089990659%7Ctwgr%5E%7Ctwcon%5Es1_c10&ref_url=https%3A%2F%2Fkentcdodds.com%2Fblog%2Fthe-testing-trophy-and-testing-classifications)

åˆ†ç±»æ˜¯å¾ˆé‡è¦çš„ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½å°±è¿™ä¸ªé—®é¢˜è¿›è¡Œå¯¹è¯ã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è¿›è¡Œå¯Œæœ‰æˆæ•ˆçš„å¯¹è¯ä¹‹å‰ï¼Œä½ ä»¬å‡ ä¹éœ€è¦å°±å¦‚ä½•å®šä¹‰è¿™äº›æœ¯è¯­è¾¾æˆå…±è¯†ã€‚ä½†æœ€ç»ˆè¿™çœŸçš„ä¸é‡è¦ã€‚æ­£å¦‚ Justin æ‰€è¯´ï¼Œè¿™æ˜¯ä¸€ç§åˆ†æ•£æ³¨æ„åŠ›çš„åšæ³•ã€‚ç‰¹åˆ«æ˜¯å½“è¿™ä¹ˆå¤šçš„ä»£ç åº“åœ¨å±é™©è¾¹ç¼˜ï¼Œè€Œåˆæ²¡æœ‰ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„æ–¹æ³•æ¥ä¿è¯ä»–ä»¬çš„ä¿®æ”¹å¯ä»¥å®‰å…¨éƒ¨ç½²çš„æ—¶å€™ã€‚

## ç»“è®º

æ€»ä¹‹ï¼Œå¸Œæœ›è¿™æœ‰åŠ©äºæ¾„æ¸…ä¸€äº›äº‹æƒ…ã€‚æ€»ç»“ä¸€ä¸‹ã€‚å½“è¯•å›¾å°†æµ‹è¯•å¥–æ¯åº”ç”¨äºä½ çš„æƒ…å†µæ—¶ï¼Œè¯·åœ¨å•ä¸ªä»£ç åº“çš„ä»£ç ä¸­è€ƒè™‘å®ƒã€‚å®ƒç»å¯¹é€‚ç”¨äºåç«¯ï¼Œä½†æˆ‘åªè€ƒè™‘äº†å•ä½“ï¼Œè€Œä¸æ˜¯å¾®æœåŠ¡ï¼Œç”šè‡³æ˜¯ serverless åŠŸèƒ½ï¼ˆæˆ‘åŒæ„ [Tim çš„è§‚ç‚¹](https://www.tbray.org/ongoing/When/202x/2021/05/15/Testing-in-2021)ï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œæˆ‘ä»¬å¤§å¤šæ•°äººéƒ½åº”è¯¥ç¼–å†™å•ä½“ï¼‰ã€‚

æµ‹è¯•å¥–æ¯ï¼ˆå½“è¢«ç†è§£æ—¶ï¼‰è®©æˆ‘ï¼ˆå’Œæ— æ•°å…¶ä»–çš„äººï¼‰æ˜ç¡®äº†æµ‹è¯•å·¥ä½œçš„é‡ç‚¹ã€‚å®ƒè¢«æ­£ç¡®è§£é‡Šæ—¶ï¼Œå¸®åŠ©æˆ‘ç‰¢è®°è¿™ä¸€å…³é”®åŸåˆ™ï¼š

> [ä½ çš„æµ‹è¯•è¶Šæ˜¯ç±»ä¼¼äºä½ çš„è½¯ä»¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå®ƒä»¬å°±è¶Šèƒ½ç»™ä½ å¸¦æ¥ä¿¡å¿ƒã€‚](https://twitter.com/kentcdodds/status/977018512689455106?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E977018512689455106%7Ctwgr%5E%7Ctwcon%5Es1_c10&ref_url=https%3A%2F%2Fkentcdodds.com%2Fblog%2Fthe-testing-trophy-and-testing-classifications)

è¿™æ˜¯æµ‹è¯• Testing Library Æ’ çš„æŒ‡å¯¼åŸåˆ™ï¼Œä¹Ÿæ˜¯æˆ‘å¯¹æˆ‘é¢ä¸´çš„æ¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜çš„æ€è€ƒæ–¹å¼ã€‚

**è®°ä½**ï¼Œè¿™éƒ½æ˜¯ä¸ºäº†è·å¾—è‰¯å¥½çš„æŠ•èµ„å›æŠ¥ï¼Œå…¶ä¸­"å›æŠ¥"æ˜¯"ä¿¡å¿ƒ"ï¼Œ"æŠ•èµ„"æ˜¯"æ—¶é—´"ã€‚å¦‚æœæˆ‘ä»¬æœ‰æ— é™çš„æ—¶é—´ï¼Œé‚£ä¹ˆå°è¯•å¯¹äº‹ç‰©è¿›è¡Œåˆ†ç±»å°±æ²¡æœ‰å¿…è¦äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ°¸è¿œå†™æµ‹è¯•äº†ï¼ä½†æˆ‘ä»¬æ²¡æœ‰ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›èƒ½å¸®åŠ©ä½ åœ¨å†³å®šæŠŠä½ çš„ç²¾åŠ›æ”¾åœ¨å“ªé‡Œã€‚

P.S. å¦‚æœä½ æƒ³äº†è§£æˆ‘å¯¹æµ‹è¯•çš„æ›´å¤šæƒ³æ³•ï¼Œæˆ‘çš„åšå®¢ä¸Šæœ‰[å¾ˆå¤šå…³äºè¿™ä¸ªä¸»é¢˜çš„æ–‡ç« ](https://kentcdodds.com/blog?q=test)ã€‚ä¸‹é¢æ˜¯æˆ‘æ¨èä½ æ¥ä¸‹æ¥é˜…è¯»çš„å‡ ç¯‡å…·ä½“æ–‡ç« ã€‚

- Confidently Shipping Code: Why I care about testing.
- Static vs Unit vs Integration vs E2E Testing for Frontend Apps: What these mean, why they matter, and why they don't. â­ï¸ This one has code examples you might find instructive if you'd like more concrete examples of how I think about these different classifications of tests.
- Testing Implementation Details: Testing implementation details is a recipe for disaster. Why is that? And what does it even mean?
- Avoid the Test User: How your UI code has only two users, but the wrong tests can add a third.
- Should I write a test or fix a bug: How to prioritize tests relative to everything else.
- How to know what to test: Practical advice to help you determine what to test.
